# ‡πÅ‡∏ú‡∏ô‡∏á‡∏≤‡∏ô‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏° 24 ‡∏Å‡∏∏‡∏°‡∏†‡∏≤‡∏û‡∏±‡∏ô‡∏ò‡πå 2569 (2026)

> ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ‚úÖ ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏à‡∏≤‡∏Å‡∏≠‡∏±‡πã‡∏ô‡πÅ‡∏•‡πâ‡∏ß ‚Äî ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏û‡∏±‡∏í‡∏ô‡∏≤
> ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå: 2 ‡∏°‡∏µ‡∏ô‡∏≤‡∏Ñ‡∏° 2026
> ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï: 2 ‡∏°‡∏µ‡∏ô‡∏≤‡∏Ñ‡∏° 2026 (‡πÉ‡∏™‡πà‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏à‡∏≤‡∏Å‡∏≠‡∏±‡πã‡∏ô)

---

## ‡∏™‡∏£‡∏∏‡∏õ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏° (Executive Summary)

‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 24/02/2569 ‡∏°‡∏µ‡∏á‡∏≤‡∏ô **15 ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏´‡∏•‡∏±‡∏Å** ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£ ‡πÅ‡∏ö‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô:

| ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó                              | ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô | ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á                                         |
| ----------------------------------- | ----- | ------------------------------------------------ |
| üî® ‡∏û‡∏±‡∏í‡∏ô‡∏≤‡πÉ‡∏´‡∏°‡πà (New Feature)          | 8     | ‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏±‡∏î‡∏£‡∏≠‡∏ö, Prompt Management, Grace period      |
| üîß ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á (Enhancement)           | 4     | Block save barcode, Export Excel ‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô, ‡πÅ‡∏Å‡πâ‡∏¢‡∏≠‡∏î |
| üìã ‡∏£‡∏≠‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ (Pending Data) | 3     | ‡∏£‡∏π‡∏õ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤, ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≤‡∏Ç‡∏≤/‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô, Format ITP        |

---

## Gap Analysis ‚Äî ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÅ‡∏•‡πâ‡∏ß vs ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥

| #   | ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£                           | ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô                                  | ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥                                | ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏Å    |
| --- | ------------------------------------- | ---------------------------------------------- | -------------------------------------------- | ---------- |
| 1   | ‡∏£‡∏π‡∏õ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö ‚Äî ‡∏Ç‡∏≠‡∏£‡∏π‡∏õ‡πÉ‡∏´‡∏°‡πà‡∏à‡∏≤‡∏Å‡∏Ñ‡∏∏‡∏ì‡∏´‡∏°‡∏ß‡∏¢ | ‡∏°‡∏µ‡∏£‡∏∞‡∏ö‡∏ö Product + imageUrl                      | ‡∏£‡∏≠‡∏£‡∏π‡∏õ‡∏à‡∏≤‡∏Å‡∏Ñ‡∏∏‡∏ì‡∏´‡∏°‡∏ß‡∏¢ ‡πÅ‡∏•‡πâ‡∏ß‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï Firestore         | ‚≠ê         |
| 2   | ‡∏Ç‡∏≠ Email BA ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î                   | ‡∏°‡∏µ‡∏£‡∏∞‡∏ö‡∏ö User + Invitation                       | ‡∏£‡∏≠ Email ‡∏à‡∏≤‡∏Å‡∏Ñ‡∏∏‡∏ì‡∏´‡∏°‡∏ß‡∏¢ ‡πÅ‡∏•‡πâ‡∏ß seed ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏∞‡∏ö‡∏ö       | ‚≠ê         |
| 3   | ‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ 2 ‡∏ä‡πà‡∏ß‡∏á + Lock 2 ‡∏ß‡∏±‡∏ô           | ‚ùå ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏∞‡∏ö‡∏ö Period/Lock                       | ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏∞‡∏ö‡∏ö Counting Period + Upload Lock      | ‚≠ê‚≠ê‚≠ê‚≠ê   |
| 4   | Export Excel ‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô (‡∏•‡∏≤/‡∏™‡∏≤‡∏¢)         | ‚ùå ‡∏´‡∏ô‡πâ‡∏≤ Attendance ‡∏î‡∏π‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß                | ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏∏‡πà‡∏° Export + ‡∏™‡∏£‡πâ‡∏≤‡∏á Excel template      | ‚≠ê‚≠ê       |
| 5   | ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ ITP Portal (SQL)            | ‡∏°‡∏µ scaffold ‡πÉ‡∏ô external-api.service.ts         | ‡∏™‡∏£‡πâ‡∏≤‡∏á ITP Connector (‡∏£‡∏≠ format ‡∏à‡∏≤‡∏Å‡∏Ñ‡∏∏‡∏ì‡∏´‡∏°‡∏ß‡∏¢)   | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê |
| 6   | ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô BA ‡πÑ‡∏°‡πà‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô 3 ‡∏ß‡∏±‡∏ô         | ‡∏°‡∏µ notification service ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ auto-detect   | ‡∏™‡∏£‡πâ‡∏≤‡∏á Cloud Function cron + alert ‡∏´‡∏ô‡πâ‡∏≤ web   | ‚≠ê‚≠ê‚≠ê     |
| 7   | ‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏´‡πâ‡∏≤‡∏°‡πÄ‡∏ã‡∏ü                 | ‚ö†Ô∏è ‡∏°‡∏µ warning ‡πÅ‡∏ï‡πà‡∏¢‡∏±‡∏á‡πÄ‡∏ã‡∏ü‡πÑ‡∏î‡πâ                     | Block save button ‡πÄ‡∏°‡∏∑‡πà‡∏≠ barcodeMatch = false | ‚≠ê         |
| 8   | ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ 100+ ‡∏ä‡∏¥‡πâ‡∏ô ‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡∏¢‡∏±‡∏á‡πÑ‡∏á         | ‡∏ñ‡πà‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡∏•‡∏∞‡∏£‡∏π‡∏õ                                 | ‡∏£‡∏≠‡∏Ñ‡∏∏‡∏ì‡∏´‡∏°‡∏ß‡∏¢‡πÅ‡∏à‡πâ‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ‚Üí ‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö multi-photo     | ‚≠ê‚≠ê‚≠ê     |
| 9   | ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏¢‡∏≠‡∏î‡∏ô‡∏±‡∏ö‡∏ö‡∏ô Web                     | ‡∏°‡∏µ dispute ‡∏à‡∏≤‡∏Å‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô ‡πÅ‡∏ï‡πà Supervisor ‡πÅ‡∏Å‡πâ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ | ‡πÄ‡∏û‡∏¥‡πà‡∏° Edit/Override ‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤ counting-summary | ‚≠ê‚≠ê‚≠ê     |
| 10  | Grace period +5 ‡∏ß‡∏±‡∏ô (‡∏•‡∏±‡∏ö)             | ‚ùå ‡πÑ‡∏°‡πà‡∏°‡∏µ                                       | ‡∏™‡∏£‡πâ‡∏≤‡∏á hidden grace period logic              | ‚≠ê‚≠ê‚≠ê     |
| 11  | ‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏Ç‡∏≤/‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô/Supervisor ‡∏Ç‡∏∂‡πâ‡∏ô‡∏à‡∏£‡∏¥‡∏á  | ‡∏°‡∏µ seed script ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö 6 ‡∏™‡∏≤‡∏Ç‡∏≤                   | ‡∏£‡∏≠‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏£‡∏¥‡∏á ‚Üí ‡∏™‡∏£‡πâ‡∏≤‡∏á import script           | ‚≠ê‚≠ê       |
| 12  | Export ‡∏ï‡∏≤‡∏° ITP format                 | ‡∏°‡∏µ export-utils.ts + export-with-images.ts     | ‡∏™‡∏£‡πâ‡∏≤‡∏á template ‡∏ï‡∏≤‡∏° format ‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏´‡∏°‡∏ß‡∏¢‡∏™‡πà‡∏á      | ‚≠ê‚≠ê‚≠ê     |
| 13  | ‡∏ñ‡πà‡∏≤‡∏¢‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏•‡∏±‡∏á submit                  | ‚ùå submit ‡πÅ‡∏•‡πâ‡∏ß‡∏à‡∏ö                               | ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏∞‡∏ö‡∏ö "Supplement Count" / ‡∏ñ‡πà‡∏≤‡∏¢‡πÄ‡∏û‡∏¥‡πà‡∏°     | ‚≠ê‚≠ê‚≠ê     |
| 14  | Prompt Management (Remote)            | ‚ùå prompt hardcoded ‡πÉ‡∏ô gemini.service.ts       | ‡∏™‡∏£‡πâ‡∏≤‡∏á Prompt Manager ‡πÉ‡∏ô Firestore + Admin UI | ‚≠ê‚≠ê‚≠ê‚≠ê   |
| 15  | Project ‡πÉ‡∏´‡∏°‡πà upload ‡∏ö‡∏¥‡∏•               | ‚ùå ‡πÑ‡∏°‡πà‡∏°‡∏µ                                       | ‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö Bill Upload module (Phase ‡∏ñ‡∏±‡∏î‡πÑ‡∏õ)      | ‚≠ê‚≠ê‚≠ê‚≠ê   |

---

## ‡πÅ‡∏ú‡∏ô‡∏á‡∏≤‡∏ô‡πÅ‡∏ö‡πà‡∏á‡∏ï‡∏≤‡∏° Phase

### Phase 1: Quick Wins ‚Äî ‡∏ó‡∏≥‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ (1-2 ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå)

#### 1.1 ‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á ‚Üí ‡∏´‡πâ‡∏≤‡∏°‡πÄ‡∏ã‡∏ü

- **‡πÑ‡∏ü‡∏•‡πå**: `app/(mini-apps)/stock-counter/result.tsx`
- **‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥**: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö `barcodeMatch` ‡πÉ‡∏ô counting session ‚Üí ‡∏ñ‡πâ‡∏≤ `false` ‡∏´‡∏£‡∏∑‡∏≠ status = `"mismatch"` ‚Üí disable ‡∏õ‡∏∏‡πà‡∏° "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏•" + ‡πÅ‡∏™‡∏î‡∏á warning ‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏ñ‡πà‡∏≤‡∏¢‡πÉ‡∏´‡∏°‡πà
- **Logic**:
  ```typescript
  // ‡πÉ‡∏ô result.tsx
  const canSave =
    session?.barcodeMatch !== false && session?.status !== "mismatch";
  // ‡∏õ‡∏∏‡πà‡∏°‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å disabled={!canSave}
  ```
- **‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏Å‡∏≤‡∏£**: 2-4 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á

#### 1.2 Export Excel ‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô

- **‡πÑ‡∏ü‡∏•‡πå**: `platform-web/app/stock-counter/dashboard/attendance/page.tsx`
- **‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥**: ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏∏‡πà‡∏° "Export Excel" ‚Üí ‡∏™‡∏£‡πâ‡∏≤‡∏á function ‡∏ó‡∏µ‡πà‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• check-in/check-out ‡∏ï‡∏≤‡∏° filter ‚Üí export ‡πÄ‡∏õ‡πá‡∏ô .xlsx
- **Columns ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ**: ‡∏ä‡∏∑‡πà‡∏≠‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô, ‡∏™‡∏≤‡∏Ç‡∏≤, ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà, ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤, ‡πÄ‡∏ß‡∏•‡∏≤‡∏≠‡∏≠‡∏Å, ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ (‡∏õ‡∏Å‡∏ï‡∏¥/‡∏™‡∏≤‡∏¢/‡∏•‡∏≤), ‡∏ô‡∏≤‡∏ó‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏≤‡∏¢
- **‡∏ï‡∏±‡∏î‡∏£‡∏≠‡∏ö**: 24:00 ‡∏ô. (‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°‡∏£‡∏∞‡∏ö‡∏∏)
- **‡πÉ‡∏ä‡πâ**: `xlsx` ‡∏´‡∏£‡∏∑‡∏≠ `exceljs` library ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏ô project
- **‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏Å‡∏≤‡∏£**: 1-2 ‡∏ß‡∏±‡∏ô

#### 1.3 ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≤‡∏Ç‡∏≤/‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô/Supervisor ‡∏Ç‡∏∂‡πâ‡∏ô‡∏à‡∏£‡∏¥‡∏á

- **‡∏£‡∏≠**: ‡∏Ñ‡∏∏‡∏ì‡∏´‡∏°‡∏ß‡∏¢‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•:
  1. ‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏Ç‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (branch name, code, address)
  2. ‡∏ä‡∏∑‡πà‡∏≠ + Email ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô BA
  3. ‡∏ä‡∏∑‡πà‡∏≠ + Email Supervisor
  4. ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå Supervisor ‚Üí BA ‚Üí ‡∏™‡∏≤‡∏Ç‡∏≤
- **‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏î‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•**: ‡∏™‡∏£‡πâ‡∏≤‡∏á script `scripts/seed-production-data.ts` ‡∏ó‡∏µ‡πà import ‡∏à‡∏≤‡∏Å CSV/Excel
- **‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏Å‡∏≤‡∏£**: 1 ‡∏ß‡∏±‡∏ô (‡∏´‡∏•‡∏±‡∏á‡πÑ‡∏î‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•)

---

### Phase 2: Core Features ‚Äî ‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏•‡∏±‡∏Å‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á (2-3 ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå)

#### 2.1 ‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏±‡∏î‡∏£‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏ö (Counting Period System)

**‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£** (‚úÖ ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏à‡∏≤‡∏Å‡∏≠‡∏±‡πã‡∏ô‡πÅ‡∏•‡πâ‡∏ß):

- ‡∏ï‡∏±‡∏î‡∏£‡∏≠‡∏ö‡∏ó‡∏∏‡∏Å‡∏Å‡∏•‡∏≤‡∏á‡πÄ‡∏î‡∏∑‡∏≠‡∏ô (‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 1-15 = ‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà 1, ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 16-‡∏™‡∏¥‡πâ‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô = ‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà 2)
- **üîí Lock ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 1 ‡πÅ‡∏•‡∏∞ 16 ‚Üí ‡∏´‡πâ‡∏≤‡∏°‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÄ‡∏•‡∏¢** (‡∏ó‡∏±‡πâ‡∏á‡∏£‡∏≠‡∏ö‡πÄ‡∏Å‡πà‡∏≤‡πÅ‡∏•‡∏∞‡∏£‡∏≠‡∏ö‡πÉ‡∏´‡∏°‡πà)
- Grace period ‡∏•‡∏±‡∏ö +5 ‡∏ß‡∏±‡∏ô ‡∏´‡∏•‡∏±‡∏á‡∏™‡∏¥‡πâ‡∏ô‡∏£‡∏≠‡∏ö (‚úÖ ‡∏≠‡∏±‡πã‡∏ô‡∏ï‡∏Å‡∏•‡∏á ‚Äî ‡πÉ‡∏ä‡πâ `periodId` ‡πÅ‡∏¢‡∏Å + ‡∏ó‡∏≥‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏°‡∏≤‡∏¢ "‡∏™‡πà‡∏á‡∏•‡πà‡∏≤‡∏ä‡πâ‡∏≤")

**‚ö†Ô∏è Lock Logic ‡∏ó‡∏µ‡πà‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô**:

```
‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á ‡∏°‡∏µ‡∏ô‡∏≤‡∏Ñ‡∏° 2026:

‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà 1: ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 2-15 ‡∏°‡∏µ.‡∏Ñ. (‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡πÑ‡∏î‡πâ)
  üîí ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 1 ‡∏°‡∏µ.‡∏Ñ. = LOCK ‡∏ó‡∏±‡πâ‡∏á‡∏ß‡∏±‡∏ô (‡∏´‡πâ‡∏≤‡∏°‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏ó‡∏∏‡∏Å‡∏£‡∏≠‡∏ö)
  üìÖ ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 2-15 ‡∏°‡∏µ.‡∏Ñ. = ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏´‡πâ‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà 1
  üîí ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 16 ‡∏°‡∏µ.‡∏Ñ. = LOCK ‡∏ó‡∏±‡πâ‡∏á‡∏ß‡∏±‡∏ô (‡∏ï‡∏±‡∏î‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà 1)

‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà 2: ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 17-31 ‡∏°‡∏µ.‡∏Ñ. (‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡πÑ‡∏î‡πâ)
  üìÖ ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 17-31 ‡∏°‡∏µ.‡∏Ñ. = ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏´‡πâ‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà 2
  üîí ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 1 ‡πÄ‡∏°.‡∏¢. = LOCK ‡∏ó‡∏±‡πâ‡∏á‡∏ß‡∏±‡∏ô (‡∏ï‡∏±‡∏î‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà 2)

Grace Period (‡∏•‡∏±‡∏ö ‚Äî ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏£‡∏π‡πâ):
  ‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà 1 ‡∏à‡∏ö 15 ‡∏°‡∏µ.‡∏Ñ. ‚Üí grace ‡∏ñ‡∏∂‡∏á 20 ‡∏°‡∏µ.‡∏Ñ.
  - ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 16 = LOCK (‡∏´‡πâ‡∏≤‡∏°‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á)
  - ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 17-20 = ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡πÄ‡∏´‡πá‡∏ô "‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤" ‡πÅ‡∏ï‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏¢‡∏±‡∏á accept + tag "‡∏™‡πà‡∏á‡∏•‡πà‡∏≤‡∏ä‡πâ‡∏≤"
  - ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 21+ = ‡∏õ‡∏¥‡∏î‡∏à‡∏£‡∏¥‡∏á ‡∏™‡πà‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÅ‡∏•‡πâ‡∏ß
```

**‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á**:

##### A. Data Model ‡πÉ‡∏´‡∏°‡πà

```typescript
// types/index.ts ‚Äî ‡πÄ‡∏û‡∏¥‡πà‡∏°
interface CountingPeriod {
  id: string;
  companyId: string;
  year: number;
  month: number; // 1-12
  half: 1 | 2; // 1 = ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 1-15, 2 = ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 16-‡∏™‡∏¥‡πâ‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô
  startDate: Timestamp; // ‡∏ß‡∏±‡∏ô‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏´‡πâ‡∏ñ‡πà‡∏≤‡∏¢ (‡πÄ‡∏ä‡πà‡∏ô 2 ‡∏°‡∏µ.‡∏Ñ.)
  endDate: Timestamp; // ‡∏ß‡∏±‡∏ô‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡∏£‡∏≠‡∏ö (‡πÄ‡∏ä‡πà‡∏ô 15 ‡∏°‡∏µ.‡∏Ñ.)
  lockDates: Timestamp[]; // ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏´‡πâ‡∏≤‡∏° upload ‡∏ó‡∏±‡πâ‡∏á‡∏ß‡∏±‡∏ô (1, 16)
  graceEndDate: Timestamp; // endDate + 5 ‡∏ß‡∏±‡∏ô (‡∏•‡∏±‡∏ö)
  status: "active" | "locked" | "grace" | "closed";
}

// ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏ô UserAssignment
interface UserAssignment {
  // ... existing fields
  periodId: string; // ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏Å‡∏±‡∏ö CountingPeriod
  countingPeriodStart: Timestamp;
  countingPeriodEnd: Timestamp;
}

// ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏ô CountingSession
interface CountingSession {
  // ... existing fields
  periodId: string;
  isLateSubmission: boolean; // true ‡∏ñ‡πâ‡∏≤‡∏™‡πà‡∏á‡πÉ‡∏ô grace period
  lateSubmittedAt?: Timestamp; // ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡∏•‡πà‡∏≤‡∏ä‡πâ‡∏≤
}
```

##### B. Service Layer

- **‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏°‡πà**: `services/counting-period.service.ts`
- Functions:
  - `getCurrentPeriod(companyId)` ‚Üí return period ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
  - `canUploadPhoto(userId, date)` ‚Üí **‡∏´‡πâ‡∏≤‡∏°‡∏ñ‡πà‡∏≤‡∏¢‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 1 ‡∏´‡∏£‡∏∑‡∏≠ 16** (lock ‡∏ó‡∏±‡πâ‡∏á‡∏ß‡∏±‡∏ô)
  - `isInGracePeriod(periodId, date)` ‚Üí ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ date ‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á endDate+1 ‡∏ñ‡∏∂‡∏á graceEndDate
  - `getUploadStatus(userId, date)` ‚Üí return: `'open'` | `'locked'` | `'grace'` | `'closed'`
  - `closePeriod(periodId)` ‚Üí ‡∏õ‡∏¥‡∏î‡∏£‡∏≠‡∏ö
  - `generatePeriods(companyId, year)` ‚Üí ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≠‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏õ‡∏µ

##### C. Mobile App Changes

- ‡∏Å‡πà‡∏≠‡∏ô‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ ‚Üí ‡πÄ‡∏ä‡πá‡∏Ñ `canUploadPhoto()` ‚Üí ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 1 ‡∏´‡∏£‡∏∑‡∏≠ 16 ‚Üí ‡πÅ‡∏™‡∏î‡∏á **"üîí ‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡∏¥‡∏î‡∏£‡∏±‡∏ö‡∏£‡∏π‡∏õ‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏û‡∏£‡∏∏‡πà‡∏á‡∏ô‡∏µ‡πâ"**
- ‡∏ñ‡πâ‡∏≤ grace period ‚Üí ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡πÄ‡∏´‡πá‡∏ô **"‚è∞ ‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡πà‡∏á‡∏£‡∏π‡∏õ‡πÅ‡∏•‡πâ‡∏ß"** ‡πÅ‡∏ï‡πà‡∏ñ‡πâ‡∏≤‡∏Å‡∏î‡∏™‡πà‡∏á ‡∏£‡∏∞‡∏ö‡∏ö‡∏¢‡∏±‡∏á accept + tag `isLateSubmission = true` (‡∏´‡πâ‡∏≤‡∏°‡πÅ‡∏™‡∏î‡∏á‡∏ß‡πà‡∏≤‡∏°‡∏µ grace)
- ‡∏ñ‡πâ‡∏≤ closed ‡∏à‡∏£‡∏¥‡∏á‡πÜ (‡πÄ‡∏•‡∏¢ grace) ‚Üí **"‚ùå ‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡πà‡∏á‡∏£‡∏π‡∏õ‡∏£‡∏≠‡∏ö‡∏ô‡∏µ‡πâ‡πÅ‡∏•‡πâ‡∏ß"** + disable ‡∏õ‡∏∏‡πà‡∏°‡∏ñ‡πà‡∏≤‡∏¢
- ‡πÅ‡∏™‡∏î‡∏á badge "‡∏£‡∏≠‡∏ö‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: 2-15 ‡∏°‡∏µ.‡∏Ñ." ‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤ stock-counter

##### D. Web Dashboard Changes

- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏ô‡πâ‡∏≤ period management ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö admin
- ‡πÅ‡∏™‡∏î‡∏á stats ‡πÅ‡∏¢‡∏Å‡∏ï‡∏≤‡∏°‡∏£‡∏≠‡∏ö
- **‡∏õ‡∏∏‡πà‡∏° "Request ‡∏Ç‡∏¢‡∏≤‡∏¢‡πÄ‡∏ß‡∏•‡∏≤"** ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö supervisor
- ‡πÅ‡∏™‡∏î‡∏á tag "‡∏™‡πà‡∏á‡∏•‡πà‡∏≤‡∏ä‡πâ‡∏≤" ‡πÉ‡∏ô‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô (admin ‡πÄ‡∏´‡πá‡∏ô ‡πÅ‡∏ï‡πà‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡πÑ‡∏°‡πà‡πÄ‡∏´‡πá‡∏ô)

**‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏Å‡∏≤‡∏£**: 5-7 ‡∏ß‡∏±‡∏ô

---

#### 2.2 ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏¢‡∏≠‡∏î‡∏ô‡∏±‡∏ö ‚Äî Supervisor Override (Web + Mobile) ‚úÖ ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÅ‡∏•‡πâ‡∏ß

**‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£** (‡∏à‡∏≤‡∏Å‡∏≠‡∏±‡πã‡∏ô):

- ‡πÄ‡∏°‡∏∑‡πà‡∏≠ AI ‡∏ô‡∏±‡∏ö‡πÑ‡∏î‡πâ 8 ‡πÅ‡∏ï‡πà BA ‡∏ô‡∏±‡∏ö‡πÑ‡∏î‡πâ 11 ‚Üí Supervisor ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡πà‡∏≤‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡πÑ‡∏´‡∏ô
- **‡∏ó‡∏≥‡πÑ‡∏î‡πâ‡∏ó‡∏±‡πâ‡∏á Web ‡πÅ‡∏•‡∏∞ Mobile** ‚Äî Supervisor ‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏°‡∏™‡∏≤‡∏Ç‡∏≤‡∏ô‡∏±‡πâ‡∏ô‡πÜ ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ
- **‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö Supervisor/Manager Mobile UI ‡∏î‡πâ‡∏ß‡∏¢** (Feature ‡πÉ‡∏´‡∏°‡πà)

**‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á**:

##### A. Data Model

```typescript
// ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏ô CountingSession
interface CountingSession {
  // ... existing fields
  finalCount?: number; // ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏ó‡∏µ‡πà supervisor ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
  finalCountSource?: "ai" | "employee" | "custom"; // ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡πÑ‡∏´‡∏ô
  supervisorOverride?: {
    overriddenBy: string; // supervisor userId
    overriddenAt: Timestamp;
    aiCount: number; // ‡∏Ñ‡πà‡∏≤ AI ‡∏ô‡∏±‡∏ö‡πÑ‡∏î‡πâ
    employeeCount: number; // ‡∏Ñ‡πà‡∏≤‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô
    selectedCount: number; // ‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏ä‡πâ
    source: "ai" | "employee" | "custom"; // ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡πÑ‡∏´‡∏ô
    customCount?: number; // ‡∏Å‡∏£‡∏ì‡∏µ‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏≠‡∏á
    reason?: string; // ‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏• (optional)
  };
  approvalStatus: "pending" | "approved" | "rejected";
}
```

##### B. Web UI ‚Äî counting-summary page

- **‡πÑ‡∏ü‡∏•‡πå**: `platform-web/app/stock-counter/dashboard/counting-summary/page.tsx`
- ‡πÄ‡∏û‡∏¥‡πà‡∏°:
  - ‡∏õ‡∏∏‡πà‡∏° "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏¢‡∏≠‡∏î" ‡∏Ç‡πâ‡∏≤‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞ session ‡∏ó‡∏µ‡πà‡∏°‡∏µ discrepancy
  - Modal ‡πÅ‡∏™‡∏î‡∏á:
    - ü§ñ AI ‡∏ô‡∏±‡∏ö‡πÑ‡∏î‡πâ: **8** [‡πÄ‡∏•‡∏∑‡∏≠‡∏Å]
    - üë§ ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô: **11** [‡πÄ‡∏•‡∏∑‡∏≠‡∏Å]
    - ‚úèÔ∏è ‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏≠‡∏á: [___] [‡πÄ‡∏•‡∏∑‡∏≠‡∏Å]
    - ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: [___] (optional)
  - ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ‡∏£‡∏≠‡∏ï‡∏£‡∏ß‡∏à ‚Üí ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÅ‡∏•‡πâ‡∏ß
  - Filter: ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î | ‡∏£‡∏≠‡∏ï‡∏£‡∏ß‡∏à | ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÅ‡∏•‡πâ‡∏ß

##### C. üì± Mobile UI ‚Äî Supervisor Dashboard (Feature ‡πÉ‡∏´‡∏°‡πà)

> **‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡∏à‡∏≤‡∏Å‡∏≠‡∏±‡πã‡∏ô**: ‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö UI ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö supervisor ‡πÅ‡∏•‡∏∞ manager ‡πÉ‡∏ô‡πÅ‡∏≠‡∏õ‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡∏î‡πâ‡∏ß‡∏¢

- **‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏°‡πà**: `app/(mini-apps)/supervisor/`
  - `index.tsx` ‚Äî Supervisor Dashboard (‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏™‡∏≤‡∏Ç‡∏≤‡∏ó‡∏µ‡πà‡∏î‡∏π‡πÅ‡∏•)
  - `counting-review.tsx` ‚Äî ‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏¢‡∏≠‡∏î‡∏ô‡∏±‡∏ö‡∏ó‡∏µ‡πà‡∏°‡∏µ discrepancy
  - `team-status.tsx` ‚Äî ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ó‡∏µ‡∏° (‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô, ‡∏ô‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤)
  - `alerts.tsx` ‚Äî ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô (BA ‡πÑ‡∏°‡πà‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô, ‡∏¢‡∏≠‡∏î‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á)

- **Supervisor Counting Review Screen**:

  ```
  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
  ‚îÇ üìã ‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏¢‡∏≠‡∏î‡∏ô‡∏±‡∏ö ‚Äî ‡∏™‡∏≤‡∏Ç‡∏≤‡πÇ‡∏£‡∏ö‡∏¥‡∏ô‡∏™‡∏±‡∏ô    ‚îÇ
  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
  ‚îÇ ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤: ‡πÅ‡∏ä‡∏°‡∏û‡∏π ABC               ‚îÇ
  ‚îÇ üì∏ [‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà‡∏ñ‡πà‡∏≤‡∏¢]                  ‚îÇ
  ‚îÇ                                 ‚îÇ
  ‚îÇ ü§ñ AI ‡∏ô‡∏±‡∏ö:      8 ‡∏ä‡∏¥‡πâ‡∏ô  [‡πÄ‡∏•‡∏∑‡∏≠‡∏Å] ‚îÇ
  ‚îÇ üë§ ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏ô‡∏±‡∏ö:  11 ‡∏ä‡∏¥‡πâ‡∏ô  [‡πÄ‡∏•‡∏∑‡∏≠‡∏Å] ‚îÇ
  ‚îÇ ‚úèÔ∏è ‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏≠‡∏á:     [__]    [‡πÄ‡∏•‡∏∑‡∏≠‡∏Å] ‚îÇ
  ‚îÇ                                 ‚îÇ
  ‚îÇ ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: [________________]    ‚îÇ
  ‚îÇ                                 ‚îÇ
  ‚îÇ     [ ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô ]  [ ‡∏Ç‡πâ‡∏≤‡∏° ]        ‚îÇ
  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
  ```

- **Supervisor Dashboard Overview**:
  - ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô BA ‡πÉ‡∏ô‡∏™‡∏≤‡∏Ç‡∏≤ + ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô
  - ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏ô‡∏±‡∏ö‡πÅ‡∏•‡πâ‡∏ß / ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ô‡∏±‡∏ö (‡∏ï‡∏≤‡∏°‡∏£‡∏≠‡∏ö)
  - ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏¢‡∏≠‡∏î‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏µ‡∏ß‡∏¥‡∏ß (discrepancy)
  - ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô BA ‡πÑ‡∏°‡πà‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô

##### D. API

- `PATCH /api/counting-sessions/[id]/override` ‚Üí update finalCount + supervisorOverride
- ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏à‡∏≤‡∏Å web ‡πÅ‡∏•‡∏∞ mobile (same API)

##### E. ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á

- **Supervisor**: ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏¢‡∏≠‡∏î‡πÑ‡∏î‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏™‡∏≤‡∏Ç‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡∏Ñ‡∏∏‡∏°
- **Manager/Admin**: ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏¢‡∏≠‡∏î‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡∏™‡∏≤‡∏Ç‡∏≤
- **Employee**: ‡∏î‡∏π‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏¢‡∏≠‡∏î‡πÑ‡∏î‡πâ

**‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏Å‡∏≤‡∏£**: 5-7 ‡∏ß‡∏±‡∏ô (‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å‡πÄ‡∏î‡∏¥‡∏°‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥ Mobile UI ‡∏î‡πâ‡∏ß‡∏¢)

---

#### 2.3 ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô BA ‡πÑ‡∏°‡πà‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô 3 ‡∏ß‡∏±‡∏ô

**‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á**:

##### A. Cloud Function (Scheduled)

```typescript
// functions/src/check-missing-checkin.ts
// ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô ‡πÄ‡∏ß‡∏•‡∏≤ 09:00
// Logic:
// 1. ‡∏î‡∏∂‡∏á users ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πà role = 'employee'
// 2. ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏•‡∏∞ user ‚Üí query check-ins 3 ‡∏ß‡∏±‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
// 3. ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ check-in ‡πÄ‡∏•‡∏¢ ‚Üí ‡∏™‡∏£‡πâ‡∏≤‡∏á notification ‡πÉ‡∏´‡πâ supervisor
// 4. ‡∏™‡∏£‡πâ‡∏≤‡∏á notification ‡πÉ‡∏´‡πâ admin ‡∏î‡πâ‡∏ß‡∏¢
```

##### B. Web Dashboard ‚Äî ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô

- **‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏°‡πà**: `platform-web/app/stock-counter/dashboard/alerts/page.tsx`
- ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô + ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ß‡∏±‡∏ô
- Filter: ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î, ‡πÄ‡∏Å‡∏¥‡∏ô 3 ‡∏ß‡∏±‡∏ô, ‡πÄ‡∏Å‡∏¥‡∏ô 7 ‡∏ß‡∏±‡∏ô
- ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏î‡∏π‡πÅ‡∏•, ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°, ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏•‡πâ‡∏ß

##### C. Push Notification

- ‡∏™‡πà‡∏á Expo push notification ‡πÉ‡∏´‡πâ supervisor ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡πÑ‡∏°‡πà‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô 3 ‡∏ß‡∏±‡∏ô
- ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°: "‚ö†Ô∏è ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô [‡∏ä‡∏∑‡πà‡∏≠] ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô‡∏°‡∏≤ [N] ‡∏ß‡∏±‡∏ô"

**‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏Å‡∏≤‡∏£**: 3-4 ‡∏ß‡∏±‡∏ô

---

#### 2.4 ‡∏£‡∏∞‡∏ö‡∏ö‡∏ñ‡πà‡∏≤‡∏¢‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏•‡∏±‡∏á Submit (Supplement Count)

**‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£**: ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô submit 15 ‡∏ä‡∏¥‡πâ‡∏ô‡πÅ‡∏•‡πâ‡∏ß ‡πÅ‡∏ï‡πà‡πÄ‡∏à‡∏≠‡∏≠‡∏µ‡∏Å 1 ‡∏ä‡∏¥‡πâ‡∏ô ‚Üí ‡∏ï‡πâ‡∏≠‡∏á‡∏ñ‡πà‡∏≤‡∏¢‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏î‡πâ

**‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏™‡∏ô‡∏≠**:

##### Option A: "‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏π‡∏õ" ‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤ History (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥)

- ‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤ `stock-counter/history/` ‚Üí ‡πÅ‡∏ï‡πà‡∏•‡∏∞ session ‡∏ó‡∏µ‡πà completed ‚Üí ‡∏°‡∏µ‡∏õ‡∏∏‡πà‡∏° "‡∏ñ‡πà‡∏≤‡∏¢‡πÄ‡∏û‡∏¥‡πà‡∏°"
- ‡∏™‡∏£‡πâ‡∏≤‡∏á **Supplement Session** ‡∏ó‡∏µ‡πà link ‡∏Å‡∏±‡∏ö original session
- Data model:

```typescript
interface SupplementSession {
  id: string;
  originalSessionId: string; // link ‡∏Å‡∏±‡∏ö session ‡πÄ‡∏î‡∏¥‡∏°
  userId: string;
  productId: string;
  additionalCount: number;
  imageUrl: string;
  aiCount: number;
  reason: string; // "‡πÄ‡∏à‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°"
  status: "pending" | "approved" | "rejected";
  createdAt: Timestamp;
}
```

- Supervisor ‡∏ï‡πâ‡∏≠‡∏á approve supplement ‡∏Å‡πà‡∏≠‡∏ô‡∏à‡∏∞‡∏£‡∏ß‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏¢‡∏≠‡∏î
- Web dashboard ‡πÅ‡∏™‡∏î‡∏á: "‡∏¢‡∏≠‡∏î‡πÄ‡∏î‡∏¥‡∏°: 15 + ‡πÄ‡∏û‡∏¥‡πà‡∏°: 1 = ‡∏£‡∏ß‡∏°: 16"

##### Option B: Re-open Session

- ‡πÄ‡∏õ‡∏¥‡∏î session ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÄ‡∏õ‡πá‡∏ô "in-progress" ‚Üí ‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡πÄ‡∏û‡∏¥‡πà‡∏° ‚Üí submit ‡πÉ‡∏´‡∏°‡πà
- ‚ùå ‡πÑ‡∏°‡πà‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏à‡∏∞ overwrite ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏î‡∏¥‡∏°

**‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏Å‡∏≤‡∏£**: 3-4 ‡∏ß‡∏±‡∏ô

---

### Phase 3: Integration & Advanced Features (3-4 ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå)

#### 3.1 Prompt Management System

**‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£**: ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô prompt ‡∏à‡∏≤‡∏Å hardcoded ‚Üí remote configuration ‡∏ó‡∏µ‡πà‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å web

**‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á**:

##### A. Data Model

```typescript
interface PromptTemplate {
  id: string;
  name: string; // ‡πÄ‡∏ä‡πà‡∏ô "barcode_counting_v2"
  description: string;
  prompt: string; // ‡∏ï‡∏±‡∏ß prompt text
  modelId: string; // ‡πÄ‡∏ä‡πà‡∏ô "gemini-2.5-flash"
  version: number;
  isActive: boolean; // version ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏≠‡∏¢‡∏π‡πà
  platform: "mobile" | "web" | "all";
  category: "counting" | "barcode" | "product_detection";
  variables: string[]; // ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏ó‡∏µ‡πà‡πÉ‡∏™‡πà‡πÑ‡∏î‡πâ ‡πÄ‡∏ä‡πà‡∏ô ["productName", "expectedBarcode"]
  createdBy: string;
  createdAt: Timestamp;
  updatedAt: Timestamp;
}

interface PromptUsageLog {
  id: string;
  promptId: string;
  version: number;
  userId: string;
  result: "success" | "failure";
  responseTime: number;
  createdAt: Timestamp;
}
```

##### B. Firestore Collection

- `promptTemplates/` ‚Äî ‡πÄ‡∏Å‡πá‡∏ö template ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
- `promptUsageLogs/` ‚Äî log ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

##### C. Mobile Service

```typescript
// services/prompt.service.ts
class PromptService {
  // ‡∏î‡∏∂‡∏á active prompt ‡∏ï‡∏≤‡∏° category + platform
  async getActivePrompt(
    category: string,
    platform: string,
  ): Promise<PromptTemplate>;

  // cache prompt ‡πÉ‡∏ô AsyncStorage (TTL 30 ‡∏ô‡∏≤‡∏ó‡∏µ)
  async getCachedPrompt(category: string): Promise<string>;

  // log ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
  async logUsage(promptId: string, result: string, responseTime: number): void;
}
```

##### D. Web Admin UI

- **‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏°‡πà**: `platform-web/app/stock-counter/dashboard/prompts/page.tsx`
- Features:
  - ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ prompt ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
  - ‡∏™‡∏£‡πâ‡∏≤‡∏á/‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç prompt + preview
  - A/B testing: active version vs candidate version
  - Usage stats: ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏Å‡∏µ‡πà%, ‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà
  - Version history

##### E. ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç gemini.service.ts

- ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å hardcoded prompt ‚Üí `PromptService.getActivePrompt('barcode', 'mobile')`
- Fallback: ‡∏ñ‡πâ‡∏≤ Firestore ‡πÑ‡∏°‡πà‡∏ï‡∏≠‡∏ö ‚Üí ‡πÉ‡∏ä‡πâ hardcoded prompt ‡πÄ‡∏î‡∏¥‡∏°

**‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏Å‡∏≤‡∏£**: 5-7 ‡∏ß‡∏±‡∏ô

---

#### 3.2 ITP Portal Integration

**‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£**: ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• stock count ‚Üí ITP Portal ‡∏ú‡πà‡∏≤‡∏ô SQL ‡∏´‡∏£‡∏∑‡∏≠ API

**‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞**: ‚è≥ ‡∏£‡∏≠ format ‡∏à‡∏≤‡∏Å‡∏Ñ‡∏∏‡∏ì‡∏´‡∏°‡∏ß‡∏¢

**‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Å‡∏≤‡∏£**:

##### A. ‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö Data Pipeline

```
[Mobile App] ‚Üí [Firestore] ‚Üí [Cloud Function] ‚Üí [Middleware API] ‚Üí [ITP SQL Database]
```

##### B. ‡∏™‡∏£‡πâ‡∏≤‡∏á Middleware (‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏î‡πâ format)

- **‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏°‡πà**: `platform-web/app/api/itp/`
  - `export/route.ts` ‚Äî ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö
  - `import/route.ts` ‚Äî ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å ITP
  - `compare/route.ts` ‚Äî ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö stock

##### C. Export Template

- ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏∏‡∏ì‡∏´‡∏°‡∏ß‡∏¢‡∏™‡πà‡∏á format ‡∏°‡∏≤ ‚Üí ‡∏™‡∏£‡πâ‡∏≤‡∏á export function ‡∏ó‡∏µ‡πà match ‡∏Å‡∏±‡∏ö format
- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ (‡∏Ñ‡∏≤‡∏î‡∏Å‡∏≤‡∏£‡∏ì‡πå): SKU, ‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤, Qty, ‡∏£‡∏≤‡∏Ñ‡∏≤, ‡∏™‡∏≤‡∏Ç‡∏≤, ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏±‡∏ö

##### D. ‡∏õ‡∏∏‡πà‡∏° "‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Ç‡πâ‡∏≤ ITP"

- ‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤ counting-summary ‚Üí ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏õ‡∏¥‡∏î‡∏£‡∏≠‡∏ö‡πÅ‡∏•‡πâ‡∏ß ‚Üí ‡∏õ‡∏∏‡πà‡∏° "‡∏™‡πà‡∏á ITP"
- ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏≤‡∏° period ‚Üí format ‡∏ï‡∏≤‡∏° ITP ‚Üí ‡∏™‡πà‡∏á

**Action Items ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏´‡∏°‡∏ß‡∏¢/‡∏Ñ‡∏∏‡∏ì‡∏û‡∏≠‡∏•**:

- [ ] ‡∏™‡πà‡∏á format import ‡∏Ç‡∏≠‡∏á ITP
- [ ] ‡∏™‡πà‡∏á API endpoint ‡∏´‡∏£‡∏∑‡∏≠ SQL connection string
- [ ] ‡πÅ‡∏à‡πâ‡∏á field mapping: SKU ‚Üí field ‡πÑ‡∏´‡∏ô, Qty ‚Üí field ‡πÑ‡∏´‡∏ô
- [ ] ‡πÅ‡∏à‡πâ‡∏á authentication method

**‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏Å‡∏≤‡∏£**: 7-10 ‡∏ß‡∏±‡∏ô (‡∏´‡∏•‡∏±‡∏á‡πÑ‡∏î‡πâ format)

---

#### 3.3 ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ 100+ ‡∏ä‡∏¥‡πâ‡∏ô ‚Äî Multi-Photo Strategy

**‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£**: ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ö‡∏≤‡∏á‡∏ï‡∏±‡∏ß (‡πÄ‡∏ä‡πà‡∏ô Mark) ‡∏°‡∏µ‡πÄ‡∏õ‡πá‡∏ô 100 ‡∏ä‡∏¥‡πâ‡∏ô ‚Üí ‡∏Å‡∏≤‡∏á‡∏´‡∏°‡∏î‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ

**‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏™‡∏ô‡∏≠**:

##### Option A: ‡∏ñ‡πà‡∏≤‡∏¢‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏π‡∏õ ‡πÅ‡∏ö‡πà‡∏á‡∏Å‡∏•‡∏∏‡πà‡∏° (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥)

- ‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà 1: ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà 1 (‡πÄ‡∏ä‡πà‡∏ô 20 ‡∏ä‡∏¥‡πâ‡∏ô)
- ‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà 2: ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà 2 (‡πÄ‡∏ä‡πà‡∏ô 25 ‡∏ä‡∏¥‡πâ‡∏ô)
- ... ‡∏ñ‡πà‡∏≤‡∏¢‡∏à‡∏ô‡∏Ñ‡∏£‡∏ö
- AI ‡∏£‡∏ß‡∏°‡∏¢‡∏≠‡∏î‡∏à‡∏≤‡∏Å‡∏ó‡∏∏‡∏Å‡∏£‡∏π‡∏õ
- ‡πÅ‡∏Å‡πâ flow ‡πÄ‡∏õ‡πá‡∏ô: Camera ‚Üí ‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ ‚Üí "‡∏ñ‡πà‡∏≤‡∏¢‡πÄ‡∏û‡∏¥‡πà‡∏°" ‡∏´‡∏£‡∏∑‡∏≠ "‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô" ‚Üí AI ‡∏£‡∏ß‡∏°‡∏ú‡∏•

```typescript
interface MultiPhotoSession {
  id: string;
  productId: string;
  photos: Array<{
    imageUrl: string;
    aiCount: number;
    capturedAt: Timestamp;
  }>;
  totalAiCount: number; // ‡∏£‡∏ß‡∏°‡∏à‡∏≤‡∏Å‡∏ó‡∏∏‡∏Å‡∏£‡∏π‡∏õ
  totalManualCount: number; // ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏ô‡∏±‡∏ö‡πÄ‡∏≠‡∏á
}
```

##### Option B: ‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡∏£‡∏ß‡∏° + ‡∏ô‡∏±‡∏ö‡∏°‡∏∑‡∏≠

- ‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ overview 1 ‡∏£‡∏π‡∏õ
- ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Å‡∏£‡∏≠‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏≠‡∏á
- ‚ùå ‡πÑ‡∏°‡πà‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÑ‡∏°‡πà‡∏°‡∏µ AI verification

**‡∏£‡∏≠‡∏Ñ‡∏∏‡∏ì‡∏´‡∏°‡∏ß‡∏¢**: ‡πÅ‡∏à‡πâ‡∏á‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ï‡∏±‡∏ß‡πÑ‡∏´‡∏ô‡∏ö‡πâ‡∏≤‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô 100+ ‡∏ä‡∏¥‡πâ‡∏ô ‚Üí ‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö specific solution

**‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏Å‡∏≤‡∏£**: 4-5 ‡∏ß‡∏±‡∏ô

---

### Phase 4: ‡∏£‡∏≠‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤

#### 4.1 ‡∏£‡∏π‡∏õ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö

- **‡∏£‡∏≠**: ‡∏Ñ‡∏∏‡∏ì‡∏´‡∏°‡∏ß‡∏¢‡∏™‡πà‡∏á‡∏£‡∏π‡∏õ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏∏‡∏Å‡∏°‡∏¥‡∏ï‡∏¥ (‡∏ä‡∏±‡∏î‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏î‡∏¥‡∏°)
- **‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏î‡πâ**: ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏Ç‡πâ‡∏≤ Firebase Storage ‚Üí ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï `products/{id}/imageUrl`
- **‡∏™‡∏£‡πâ‡∏≤‡∏á script**: `scripts/update-product-images.ts` ‡∏ó‡∏µ‡πà batch upload ‡∏à‡∏≤‡∏Å‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå

#### 4.2 ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≤‡∏Ç‡∏≤/‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô Production

- **‡∏£‡∏≠**: CSV/Excel ‡∏à‡∏≤‡∏Å‡∏Ñ‡∏∏‡∏ì‡∏´‡∏°‡∏ß‡∏¢ (‡∏™‡∏≤‡∏Ç‡∏≤, ‡∏ä‡∏∑‡πà‡∏≠ BA, ‡∏ä‡∏∑‡πà‡∏≠ Supervisor, Email ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î)
- **‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏î‡πâ**:
  - ‡∏™‡∏£‡πâ‡∏≤‡∏á `scripts/seed-production-branches.ts`
  - ‡∏™‡∏£‡πâ‡∏≤‡∏á `scripts/seed-production-users.ts`
  - ‡∏™‡πà‡∏á invitation email ‡πÉ‡∏´‡πâ BA + Supervisor ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î

#### 4.3 Format ITP

- **‡∏£‡∏≠**: ‡∏Ñ‡∏∏‡∏ì‡∏´‡∏°‡∏ß‡∏¢‡∏™‡πà‡∏á format + ‡∏Ñ‡∏∏‡∏ì‡∏û‡∏≠‡∏•‡∏ó‡∏≥‡∏ñ‡∏±‡∏á‡∏Å‡∏•‡∏≤‡∏á
- **‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏î‡πâ**: ‡∏™‡∏£‡πâ‡∏≤‡∏á export adapter ‡∏ï‡∏≤‡∏° format

---

## ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° & ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö ‚Äî ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÅ‡∏•‡πâ‡∏ß ‚úÖ

> ‡∏ï‡∏≠‡∏ö‡πÇ‡∏î‡∏¢: ‡∏≠‡∏±‡πã‡∏ô (‡∏ó‡∏µ‡∏°‡∏û‡∏±‡∏í‡∏ô‡∏≤) ‚Äî 2 ‡∏°‡∏µ‡∏ô‡∏≤‡∏Ñ‡∏° 2026

### 1. Lock 2 ‡∏ß‡∏±‡∏ô ‡∏´‡∏°‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ß‡πà‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£?

- **‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö**: üîí **‡∏•‡πá‡∏≠‡∏Ñ‡∏ó‡∏±‡πâ‡∏á‡∏ß‡∏±‡∏ô ‡∏´‡πâ‡∏≤‡∏°‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏ó‡∏∏‡∏Å‡∏£‡∏≠‡∏ö** ‡πÉ‡∏ô‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 1 ‡πÅ‡∏•‡∏∞ 16 ‡πÄ‡∏•‡∏¢
- **‡∏™‡∏£‡∏∏‡∏õ**: ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 1 ‡∏´‡∏£‡∏∑‡∏≠ 16 ‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏∑‡∏≠‡∏ô ‚Üí ‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡πÉ‡∏î‡πÜ ‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏¥‡πâ‡∏ô (‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏£‡∏≠‡∏ö‡πÄ‡∏Å‡πà‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏≠‡∏ö‡πÉ‡∏´‡∏°‡πà)

### 2. Grace period +5 ‡∏ß‡∏±‡∏ô ‡∏Ç‡πâ‡∏≤‡∏°‡∏£‡∏≠‡∏ö?

- **‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö**: ‚úÖ ‡∏ï‡∏Å‡∏•‡∏á‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏™‡∏ô‡∏≠ ‚Äî ‡πÉ‡∏ä‡πâ `periodId` ‡πÅ‡∏¢‡∏Å‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô
- **‡∏™‡∏£‡∏∏‡∏õ**: ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡πÄ‡∏´‡πá‡∏ô "‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡πà‡∏á‡∏£‡∏π‡∏õ" ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏ö‡∏£‡∏≠‡∏ö ‡πÅ‡∏ï‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏¢‡∏±‡∏á accept ‡πÅ‡∏ö‡∏ö‡πÄ‡∏á‡∏µ‡∏¢‡∏ö‡πÜ + tag "‡∏™‡πà‡∏á‡∏•‡πà‡∏≤‡∏ä‡πâ‡∏≤" (‡∏´‡πâ‡∏≤‡∏°‡πÉ‡∏´‡πâ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤‡∏°‡∏µ grace period)

### 3. Export ITP ‚Äî ‡∏ï‡∏≠‡∏ô‡πÑ‡∏´‡∏ô‡∏™‡πà‡∏á?

- **‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö**: ‚è≠Ô∏è **‡∏Ç‡πâ‡∏≤‡∏°‡πÑ‡∏õ‡∏Å‡πà‡∏≠‡∏ô** ‚Äî ‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ export ‡πÄ‡∏õ‡πá‡∏ô Excel ‡∏õ‡∏Å‡∏ï‡∏¥‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏ó‡∏≥‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡πá‡∏û‡∏≠
- **‡∏™‡∏£‡∏∏‡∏õ**: ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á ITP connector ‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ ‚Üí ‡∏¢‡πâ‡∏≤‡∏¢‡πÑ‡∏õ Phase ‡∏ñ‡∏±‡∏î‡πÑ‡∏õ

### 4. Qty + Price ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á export?

- **‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö**: ‚è≠Ô∏è **‡∏Ç‡πâ‡∏≤‡∏°‡πÑ‡∏õ‡∏Å‡πà‡∏≠‡∏ô** ‚Äî ‡∏ô‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡∏≠‡∏á Upload ‡∏ö‡∏¥‡∏• (project ‡πÉ‡∏´‡∏°‡πà) Phase ‡∏ñ‡∏±‡∏î‡πÑ‡∏õ
- **‡∏™‡∏£‡∏∏‡∏õ**: ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏° Price ‡πÉ‡∏ô Product model ‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ

### 5. Counting Summary ‚Äî Supervisor ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏¢‡∏≠‡∏î‡∏¢‡∏±‡∏á‡πÑ‡∏á?

- **‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö**: ‚úÖ Supervisor ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ‡∏ó‡∏±‡πâ‡∏á **Web ‡πÅ‡∏•‡∏∞ Mobile** ‚Äî ‡∏ß‡πà‡∏≤‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡∏¢‡∏≠‡∏î AI ‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏≠‡∏î‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô
- **‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°**: ‡∏ï‡πâ‡∏≠‡∏á **‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö Supervisor/Manager Mobile UI** ‡∏î‡πâ‡∏ß‡∏¢‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô
- **‡∏™‡∏£‡∏∏‡∏õ**: ‡∏™‡∏£‡πâ‡∏≤‡∏á Supervisor Dashboard ‡∏ó‡∏±‡πâ‡∏á‡∏ö‡∏ô web (counting-summary) ‡πÅ‡∏•‡∏∞ mobile (mini-app ‡πÉ‡∏´‡∏°‡πà)

### ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠ ‚Äî ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ (‡∏Ñ‡∏∏‡∏ì‡∏´‡∏°‡∏ß‡∏¢)

1. ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ 100+ ‡∏ä‡∏¥‡πâ‡∏ô‡∏°‡∏µ‡∏ï‡∏±‡∏ß‡πÑ‡∏´‡∏ô‡∏ö‡πâ‡∏≤‡∏á? ‡∏Å‡∏µ‡πà SKU?
2. ‡∏™‡∏≤‡∏Ç‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏°‡∏µ‡∏Å‡∏µ‡πà‡∏™‡∏≤‡∏Ç‡∏≤? ‡∏≠‡∏¢‡∏≤‡∏Å‡πÑ‡∏î‡πâ Excel ‡∏ó‡∏µ‡πà‡∏°‡∏µ: ‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏Ç‡∏≤, code, ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà, ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô BA, supervisor
3. Project ‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á upload ‡∏ö‡∏¥‡∏• ‚Äî ‡πÄ‡∏õ‡πá‡∏ô‡∏ö‡∏¥‡∏•‡∏≠‡∏∞‡πÑ‡∏£? ‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à? ‡πÉ‡∏ö‡∏™‡πà‡∏á‡∏Ç‡∏≠‡∏á? ‡∏ö‡∏¥‡∏•‡∏ã‡∏∑‡πâ‡∏≠?

---

## Timeline ‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏Å‡∏≤‡∏£ (‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡πÑ‡∏î‡πâ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö)

```
‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå   1-2:  Phase 1 (Quick Wins) ‚Äî barcode block, export excel, seed data
‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå   3-4:  Phase 2a ‚Äî ‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏±‡∏î‡∏£‡∏≠‡∏ö + lock ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 1,16 + grace period
‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå   5-7:  Phase 2b ‚Äî Supervisor Override (Web+Mobile) + Supervisor Mobile UI
‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå   8-9:  Phase 2c ‚Äî ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÑ‡∏°‡πà‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô + ‡∏ñ‡πà‡∏≤‡∏¢‡πÄ‡∏û‡∏¥‡πà‡∏°
‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå  10-12: Phase 3 ‚Äî Prompt Management
‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå  13+:   Phase 4 ‚Äî Multi-photo, ITP Integration, Bill upload
```

**‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏à‡∏≤‡∏Å‡πÄ‡∏î‡∏¥‡∏°**:

- ITP Integration ‡∏¢‡πâ‡∏≤‡∏¢‡πÑ‡∏õ Phase 4 (‡∏≠‡∏±‡πã‡∏ô‡∏ö‡∏≠‡∏Å‡∏Ç‡πâ‡∏≤‡∏°‡πÑ‡∏õ‡∏Å‡πà‡∏≠‡∏ô)
- Qty/Price export ‡∏¢‡πâ‡∏≤‡∏¢‡πÑ‡∏õ Phase 4 (‡πÄ‡∏õ‡πá‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏Ç‡∏≠‡∏á project upload ‡∏ö‡∏¥‡∏•)
- Supervisor Override ‡∏Ç‡∏¢‡∏≤‡∏¢‡πÄ‡∏õ‡πá‡∏ô 3 ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå (‡πÄ‡∏û‡∏¥‡πà‡∏° Mobile UI)

---

## ‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç (Priority)

| ‡∏•‡∏≥‡∏î‡∏±‡∏ö | ‡∏á‡∏≤‡∏ô                        | ‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•                               |
| ----- | -------------------------- | ------------------------------------ |
| üî¥ P0 | ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≤‡∏Ç‡∏≤/‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô‡∏à‡∏£‡∏¥‡∏á | ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏õ‡∏¥‡∏î‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏£‡∏¥‡∏á              |
| üî¥ P0 | ‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏´‡πâ‡∏≤‡∏°‡πÄ‡∏ã‡∏ü      | ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î                 |
| üü† P1 | ‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏±‡∏î‡∏£‡∏≠‡∏ö + Lock + Grace  | Business logic ‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡∏ô‡∏±‡∏ö        |
| üü† P1 | ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏¢‡∏≠‡∏î‡∏ô‡∏±‡∏ö‡∏ö‡∏ô Web          | Supervisor ‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö/‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏î‡πâ      |
| üü° P2 | Export Excel ‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô       | ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏™‡πà‡∏á‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£         |
| üü° P2 | ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÑ‡∏°‡πà‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô 3 ‡∏ß‡∏±‡∏ô  | ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô                        |
| üü° P2 | ‡∏ñ‡πà‡∏≤‡∏¢‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏•‡∏±‡∏á submit       | ‡πÄ‡∏Ñ‡∏™‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡∏à‡∏£‡∏¥‡∏á                   |
| ÔøΩ P1  | Supervisor Mobile UI       | ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏Ñ‡∏π‡πà‡∏Å‡∏±‡∏ö Override (‡∏≠‡∏±‡πã‡∏ô‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô)  |
| üîµ P3 | Prompt Management          | ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á AI ‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô              |
| üîµ P3 | Multi-photo 100+ ‡∏ä‡∏¥‡πâ‡∏ô      | ‡∏£‡∏≠‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Å‡πà‡∏≠‡∏ô                   |
| ‚ö™ P4 | ITP Integration            | ‡∏≠‡∏±‡πã‡∏ô‡∏ö‡∏≠‡∏Å‡∏Ç‡πâ‡∏≤‡∏°‡πÑ‡∏õ‡∏Å‡πà‡∏≠‡∏ô ‚Äî ‡πÉ‡∏ä‡πâ Excel export |
| ‚ö™ P4 | Upload ‡∏ö‡∏¥‡∏• (project ‡πÉ‡∏´‡∏°‡πà)  | Phase ‡∏ñ‡∏±‡∏î‡πÑ‡∏õ                          |

---

## ‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç/‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà

### ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (Modify)

| ‡πÑ‡∏ü‡∏•‡πå                                                                 | ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á                                                |
| -------------------------------------------------------------------- | ------------------------------------------------------------- |
| `types/index.ts`                                                     | ‡πÄ‡∏û‡∏¥‡πà‡∏° CountingPeriod, SupplementSession, PromptTemplate types |
| `services/gemini.service.ts`                                         | ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å hardcoded prompt ‚Üí PromptService                   |
| `services/counting.service.ts`                                       | ‡πÄ‡∏û‡∏¥‡πà‡∏° period-aware logic                                      |
| `app/(mini-apps)/stock-counter/result.tsx`                           | Block save ‡πÄ‡∏°‡∏∑‡πà‡∏≠ barcode mismatch                             |
| `app/(mini-apps)/stock-counter/index.tsx`                            | ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≠‡∏ö‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô + lock check                             |
| `app/(mini-apps)/stock-counter/history/*`                            | ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏∏‡πà‡∏° "‡∏ñ‡πà‡∏≤‡∏¢‡πÄ‡∏û‡∏¥‡πà‡∏°"                                         |
| `platform-web/app/stock-counter/dashboard/attendance/page.tsx`       | ‡πÄ‡∏û‡∏¥‡πà‡∏° Export Excel                                            |
| `platform-web/app/stock-counter/dashboard/counting-summary/page.tsx` | ‡πÄ‡∏û‡∏¥‡πà‡∏° Supervisor override                                     |
| `services/notification.service.ts`                                   | ‡πÄ‡∏û‡∏¥‡πà‡∏° missing check-in notification type                      |

### ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà (New)

| ‡πÑ‡∏ü‡∏•‡πå                                                            | ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢                      |
| --------------------------------------------------------------- | ----------------------------- |
| `services/counting-period.service.ts`                           | ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏ö + lock logic  |
| `services/prompt.service.ts`                                    | Prompt Management service     |
| `app/(mini-apps)/supervisor/index.tsx`                          | üì± Supervisor Dashboard (NEW) |
| `app/(mini-apps)/supervisor/counting-review.tsx`                | üì± ‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏¢‡∏≠‡∏î‡∏ô‡∏±‡∏ö discrepancy    |
| `app/(mini-apps)/supervisor/team-status.tsx`                    | üì± ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ó‡∏µ‡∏° BA                |
| `app/(mini-apps)/supervisor/alerts.tsx`                         | üì± ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô supervisor       |
| `platform-web/app/stock-counter/dashboard/alerts/page.tsx`      | ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô (web)    |
| `platform-web/app/stock-counter/dashboard/prompts/page.tsx`     | Prompt Management admin       |
| `platform-web/app/api/counting-sessions/[id]/override/route.ts` | Override API                  |
| `scripts/seed-production-data.ts`                               | Import ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏£‡∏¥‡∏á             |
| `scripts/update-product-images.ts`                              | ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏£‡∏π‡∏õ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤               |

---

## ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏µ‡∏°

1. **‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏°‡∏µ‡πÑ‡∏î‡πâ‡∏´‡∏•‡∏≤‡∏¢‡∏™‡∏≤‡∏Ç‡∏≤** ‚Äî ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô User model ‡∏°‡∏µ `branchId` ‡πÄ‡∏õ‡πá‡∏ô single value ‚Üí ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô `branchIds: string[]` ‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á `userBranches` sub-collection
2. **‡∏£‡∏∞‡∏ö‡∏ö grace period ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡∏±‡∏ö** ‚Äî ‡πÑ‡∏°‡πà‡πÅ‡∏™‡∏î‡∏á countdown ‡∏´‡∏£‡∏∑‡∏≠‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏î‡πÜ ‡∏ó‡∏µ‡πà‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤‡∏°‡∏µ +5 ‡∏ß‡∏±‡∏ô
3. **Watson Excel Validator** ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß ‡∏≠‡∏≤‡∏à reuse ‡πÑ‡∏î‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö ITP format validation
4. **Export infrastructure** (exceljs, jsPDF) ‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß ‚Üí ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á library ‡πÉ‡∏´‡∏°‡πà
5. **ITP Integration ‡∏Ç‡πâ‡∏≤‡∏°‡πÑ‡∏õ‡∏Å‡πà‡∏≠‡∏ô** ‚Äî ‡∏≠‡∏±‡πã‡∏ô‡∏ö‡∏≠‡∏Å‡πÉ‡∏ä‡πâ Excel export ‡∏õ‡∏Å‡∏ï‡∏¥‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡πá‡∏û‡∏≠
6. **Qty + Price ‡∏Ç‡πâ‡∏≤‡∏°‡πÑ‡∏õ‡∏Å‡πà‡∏≠‡∏ô** ‚Äî ‡πÄ‡∏õ‡πá‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏Ç‡∏≠‡∏á project upload ‡∏ö‡∏¥‡∏• Phase ‡∏ñ‡∏±‡∏î‡πÑ‡∏õ
7. **Supervisor Mobile UI ‡πÄ‡∏õ‡πá‡∏ô‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥** ‚Äî ‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö mini-app ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö supervisor/manager ‡πÉ‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠
