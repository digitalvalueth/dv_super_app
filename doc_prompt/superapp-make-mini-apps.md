# ğŸš€ Super App Architecture Design

## ğŸ“‹ à¸ªà¸£à¸¸à¸›à¹‚à¸›à¸£à¹€à¸ˆà¸„ (Brief)

### à¹à¸™à¸§à¸„à¸´à¸”

à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸ˆà¸²à¸ Single App â†’ **Super App** à¹à¸šà¸š à¹€à¸›à¹‹à¸²à¸•à¸±à¸‡ / True Wallet à¸—à¸µà¹ˆà¸¡à¸µ Mini Apps à¸«à¸¥à¸²à¸¢à¸•à¸±à¸§à¸­à¸¢à¸¹à¹ˆà¸ à¸²à¸¢à¹ƒà¸™

### Mini Apps à¸—à¸µà¹ˆà¸¡à¸µ

1. **ğŸ”¢ Stock Counter** (app à¸›à¸±à¸ˆà¸ˆà¸¸à¸šà¸±à¸™) - à¸™à¸±à¸šà¸ªà¸•à¹‡à¸­à¸à¸ªà¸´à¸™à¸„à¹‰à¸²à¸”à¹‰à¸§à¸¢ AI
2. **ğŸ™ï¸ Speech to Text** (speech-to-text/) - à¹à¸›à¸¥à¸‡à¹€à¸ªà¸µà¸¢à¸‡à¹€à¸›à¹‡à¸™à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡
3. **ğŸ“Š Admin Dashboard** (admin-web/) - à¸ˆà¸±à¸”à¸à¸²à¸£à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸šà¸™ web

---

## ğŸ—ï¸ Architecture Options

### Option 1: Monorepo with Turborepo/Nx (à¹à¸™à¸°à¸™à¸³ â­)

```
super-fitt/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ mobile/              # Main Super App (Expo)
â”‚   â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”‚   â”œâ”€â”€ (tabs)/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ home/    # ğŸ  à¸«à¸™à¹‰à¸²à¹à¸£à¸ Super App
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ wallet/  # ğŸ’° Wallet (à¸–à¹‰à¸²à¸¡à¸µ)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ profile/ # ğŸ‘¤ à¹‚à¸›à¸£à¹„à¸Ÿà¸¥à¹Œ
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ more/    # âš™ï¸ à¹€à¸à¸´à¹ˆà¸¡à¹€à¸•à¸´à¸¡
â”‚   â”‚   â”‚   â””â”€â”€ mini-apps/
â”‚   â”‚   â”‚       â”œâ”€â”€ stock-counter/  # Mini App 1
â”‚   â”‚   â”‚       â””â”€â”€ speech-to-text/ # Mini App 2
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”‚
â”‚   â””â”€â”€ admin-web/           # Admin Dashboard (Next.js)
â”‚       â””â”€â”€ package.json
â”‚
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ ui/                  # Shared UI Components
â”‚   â”œâ”€â”€ config/              # Shared Config (Firebase, etc.)
â”‚   â”œâ”€â”€ services/            # Shared Services (API, Auth)
â”‚   â””â”€â”€ types/               # Shared TypeScript Types
â”‚
â”œâ”€â”€ turbo.json
â””â”€â”€ package.json
```

### Option 2: Feature Modules (à¸‡à¹ˆà¸²à¸¢à¸à¸§à¹ˆà¸², à¹€à¸«à¸¡à¸²à¸°à¸à¸±à¸šà¸•à¸­à¸™à¸™à¸µà¹‰)

```
super-fitt/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ (tabs)/
â”‚   â”‚   â”œâ”€â”€ _layout.tsx
â”‚   â”‚   â”œâ”€â”€ index.tsx        # ğŸ  Home (Super App Menu)
â”‚   â”‚   â”œâ”€â”€ profile/
â”‚   â”‚   â””â”€â”€ settings/
â”‚   â”‚
â”‚   â””â”€â”€ (mini-apps)/         # ğŸ§© Mini Apps Group
â”‚       â”œâ”€â”€ _layout.tsx
â”‚       â”œâ”€â”€ stock-counter/   # à¹€à¸”à¸´à¸¡: camera, preview, result
â”‚       â”‚   â”œâ”€â”€ index.tsx    # Entry point
â”‚       â”‚   â”œâ”€â”€ camera.tsx
â”‚       â”‚   â”œâ”€â”€ preview.tsx
â”‚       â”‚   â””â”€â”€ result.tsx
â”‚       â”‚
â”‚       â””â”€â”€ speech-to-text/  # à¸¢à¹‰à¸²à¸¢à¸¡à¸²à¸ˆà¸²à¸ speech-to-text/
â”‚           â”œâ”€â”€ index.tsx
â”‚           â””â”€â”€ ...
â”‚
â”œâ”€â”€ modules/                 # Business Logic Modules
â”‚   â”œâ”€â”€ stock-counter/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â””â”€â”€ stores/
â”‚   â”‚
â”‚   â””â”€â”€ speech-to-text/
â”‚       â”œâ”€â”€ components/
â”‚       â”œâ”€â”€ services/
â”‚       â””â”€â”€ stores/
â”‚
â”œâ”€â”€ shared/                  # Shared across all mini-apps
â”‚   â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ stores/
â”‚   â””â”€â”€ utils/
â”‚
â””â”€â”€ admin-web/               # à¸„à¸‡à¹€à¸”à¸´à¸¡
```

---

## ğŸ“± UI Layout Design - à¸«à¸™à¹‰à¸² Home (Super App)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ   Super Fitt              ğŸ””  ğŸ‘¤  â”‚  â† Header
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   à¸ªà¸§à¸±à¸ªà¸”à¸µà¸•à¸­à¸™à¹€à¸Šà¹‰à¸²! ğŸ‘‹         â”‚   â”‚  â† User Banner
â”‚  â”‚   Watthachai                â”‚   â”‚
â”‚  â”‚   à¸šà¸£à¸´à¸©à¸±à¸—: ABC Company       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  â•â•â•â•â•â• à¸šà¸£à¸´à¸à¸²à¸£à¸‚à¸­à¸‡à¹€à¸£à¸² â•â•â•â•â•â•        â”‚  â† Section Title
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ ğŸ“¦  â”‚  â”‚ ğŸ™ï¸  â”‚  â”‚ ğŸ“Š  â”‚  â”‚ â•  â”‚â”‚  â† Mini Apps Grid
â”‚  â”‚Stockâ”‚  â”‚Voiceâ”‚  â”‚Reportâ”‚  â”‚More â”‚â”‚
â”‚  â”‚Countâ”‚  â”‚ STT â”‚  â”‚     â”‚  â”‚     â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                     â”‚
â”‚  â•â•â•â•â•â• à¸à¸´à¸ˆà¸à¸£à¸£à¸¡à¸¥à¹ˆà¸²à¸ªà¸¸à¸” â•â•â•â•â•â•       â”‚  â† Recent Activity
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ“¦ à¸™à¸±à¸šà¸ªà¸•à¹‡à¸­à¸à¸ªà¸³à¹€à¸£à¹‡à¸ˆ           â”‚   â”‚
â”‚  â”‚    à¸ªà¸²à¸‚à¸²à¸à¸£à¸¸à¸‡à¹€à¸—à¸à¸¯ | 15 à¸£à¸²à¸¢à¸à¸²à¸£   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  â•â•â•â•â•â• à¸ªà¸–à¸´à¸•à¸´à¸§à¸±à¸™à¸™à¸µà¹‰ â•â•â•â•â•â•         â”‚  â† Quick Stats
â”‚  â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ 24  â”‚ â”‚ 18  â”‚ â”‚  6  â”‚          â”‚
â”‚  â”‚à¸™à¸±à¸š  â”‚ â”‚à¸ªà¸³à¹€à¸£à¹‡à¸ˆâ”‚ â”‚à¸£à¸­   â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   ğŸ         ğŸ“±        ğŸ‘¤           â”‚  â† Bottom Tab Bar
â”‚  à¸«à¸™à¹‰à¸²à¹à¸£à¸   à¸šà¸£à¸´à¸à¸²à¸£   à¹‚à¸›à¸£à¹„à¸Ÿà¸¥à¹Œ        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¨ Component Structure

```tsx
// app/(tabs)/index.tsx - à¸«à¸™à¹‰à¸² Home
<SafeAreaView>
  <Header />
  <ScrollView>
    <UserBanner user={user} />

    <Section title="à¸šà¸£à¸´à¸à¸²à¸£à¸‚à¸­à¸‡à¹€à¸£à¸²">
      <MiniAppGrid>
        <MiniAppCard
          icon="ğŸ“¦"
          title="à¸™à¸±à¸šà¸ªà¸•à¹‡à¸­à¸"
          route="/(mini-apps)/stock-counter"
        />
        <MiniAppCard
          icon="ğŸ™ï¸"
          title="Speech to Text"
          route="/(mini-apps)/speech-to-text"
        />
        <MiniAppCard icon="ğŸ“Š" title="à¸£à¸²à¸¢à¸‡à¸²à¸™" route="/(mini-apps)/reports" />
      </MiniAppGrid>
    </Section>

    <Section title="à¸à¸´à¸ˆà¸à¸£à¸£à¸¡à¸¥à¹ˆà¸²à¸ªà¸¸à¸”">
      <RecentActivityList activities={recentActivities} />
    </Section>
  </ScrollView>
  <BottomTabBar />
</SafeAreaView>
```

---

## ğŸ“ Migration Plan (à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¸à¸²à¸£à¸¢à¹‰à¸²à¸¢)

### Phase 1: Restructure (1-2 à¸§à¸±à¸™)

- [ ] à¸ªà¸£à¹‰à¸²à¸‡à¹‚à¸Ÿà¸¥à¹€à¸”à¸­à¸£à¹Œ `app/(mini-apps)/`
- [ ] à¸¢à¹‰à¸²à¸¢ stock counter screens à¹„à¸› `(mini-apps)/stock-counter/`
- [ ] à¸ªà¸£à¹‰à¸²à¸‡à¸«à¸™à¹‰à¸² Home à¹ƒà¸«à¸¡à¹ˆ `app/(tabs)/index.tsx`

### Phase 2: Integrate Speech-to-Text (2-3 à¸§à¸±à¸™)

- [ ] à¸¢à¹‰à¸²à¸¢ speech-to-text à¹€à¸‚à¹‰à¸²à¸¡à¸²à¹€à¸›à¹‡à¸™ mini app
- [ ] Merge dependencies à¹à¸¥à¸° config

### Phase 3: Shared Components (1-2 à¸§à¸±à¸™)

- [ ] à¸ªà¸£à¹‰à¸²à¸‡ shared UI components
- [ ] Refactor services à¹ƒà¸«à¹‰à¹ƒà¸Šà¹‰à¸£à¹ˆà¸§à¸¡à¸à¸±à¸™

### Phase 4: Polish (1-2 à¸§à¸±à¸™)

- [ ] à¸—à¸³ animations à¹à¸¥à¸° transitions
- [ ] Testing à¹à¸¥à¸° bug fixes

---

## â“ à¸„à¸³à¸–à¸²à¸¡à¸ªà¸³à¸«à¸£à¸±à¸šà¸•à¸±à¸”à¸ªà¸´à¸™à¹ƒà¸ˆ

1. **à¸•à¹‰à¸­à¸‡à¸à¸²à¸£ Wallet/Payment feature à¹„à¸«à¸¡?** (à¹à¸šà¸š à¹€à¸›à¹‹à¸²à¸•à¸±à¸‡)
2. **Mini Apps à¸ˆà¸°à¹à¸¢à¸ codebase à¸«à¸£à¸·à¸­à¸£à¸§à¸¡à¹ƒà¸™ monorepo?**
3. **à¸•à¹‰à¸­à¸‡à¸à¸²à¸£ Push Notification à¸•à¹ˆà¸²à¸‡à¸à¸±à¸™à¹à¸•à¹ˆà¸¥à¸° mini app à¹„à¸«à¸¡?**
4. **Admin Dashboard à¸•à¹‰à¸­à¸‡ manage à¹„à¸”à¹‰à¸—à¸¸à¸ mini app à¹„à¸«à¸¡?**

---

## ğŸ’¡ à¸„à¸³à¹à¸™à¸°à¸™à¸³

**à¹€à¸£à¸´à¹ˆà¸¡à¸ˆà¸²à¸ Option 2 (Feature Modules)** à¸à¹ˆà¸­à¸™ à¹€à¸à¸£à¸²à¸°:

- à¹„à¸¡à¹ˆà¸•à¹‰à¸­à¸‡ setup tooling à¹ƒà¸«à¸¡à¹ˆ (Turborepo/Nx)
- Migrate à¹„à¸”à¹‰à¹€à¸£à¹‡à¸§à¸à¸§à¹ˆà¸²
- à¸–à¹‰à¸²à¹‚à¸•à¸‚à¸¶à¹‰à¸™à¸„à¹ˆà¸­à¸¢à¸¢à¹‰à¸²à¸¢à¹„à¸› Monorepo à¸—à¸µà¸«à¸¥à¸±à¸‡

**à¸ªà¸´à¹ˆà¸‡à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸—à¸³à¸à¹ˆà¸­à¸™:**

1. âœ… Design à¸«à¸™à¹‰à¸² Home à¹ƒà¸«à¸¡à¹ˆ
2. âœ… à¸ªà¸£à¹‰à¸²à¸‡à¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡ mini-apps
3. âœ… Migrate stock counter
4. âœ… Integrate speech-to-text
